name: Run e2e tests for both platforms

on:
  workflow_dispatch:
    inputs:
      IS_DEVELOPMENT:
        type: choice
        description: IS_DEVELOPMENT
        options:
          - false
          - true

      IS_SSS_ENABLED:
        type: choice
        description: IS_SSS_ENABLED
        options:
          - true
          - false

      STORIES_ENABLED:
        type: choice
        description: STORIES_ENABLED
        options:
          - true
          - false

  workflow_call:
    inputs:
      IS_DEVELOPMENT:
        required: true
        type: string
      IS_SSS_ENABLED:
        required: true
        type: string
      STORIES_ENABLED:
        required: true
        type: string

jobs:
  build_android:
    name: Android
    uses: ./.github/workflows/e2e_android.yml
    secrets: inherit
    with:
      IS_DEVELOPMENT: ${{github.event.inputs.IS_DEVELOPMENT}}
      IS_SSS_ENABLED: ${{github.event.inputs.IS_SSS_ENABLED}}
      STORIES_ENABLED: ${{github.event.inputs.STORIES_ENABLED}}

  build_ios:
    name: iOS
    uses: ./.github/workflows/e2e_ios.yml
    secrets: inherit
    with:
      IS_DEVELOPMENT: ${{github.event.inputs.IS_DEVELOPMENT}}
      IS_SSS_ENABLED: ${{github.event.inputs.IS_SSS_ENABLED}}
      STORIES_ENABLED: ${{github.event.inputs.STORIES_ENABLED}}